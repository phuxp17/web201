<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√°m Ph√° Thi·∫øt K·∫ø CSDL eCommerce (ƒê·∫ßy ƒê·ªß T√≠nh NƒÉng)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
        - Report Info: SQL Constraints (PK, FK, NOT NULL, UNIQUE, CHECK, DEFAULT) -> Goal: Inform, Understand Rules -> Presentation: Textual descriptions, bulleted examples per constraint. -> Interaction: Static display within tab. -> Justification: Clear explanation of fundamental DB rules. Method: HTML/CSS.
        - Report Info: Product Expiration & Repurposing (refined) -> Goal: Problem/Solution Analysis, Understand Advanced Modeling -> Presentation: Problem statement, proposed new/updated table structures (Products with 'is_recyclable', Inventory_Lot, Product_Transformation) with attributes listed in HTML tables, and textual explanations for their necessity, emphasizing derived products are also in 'Products' table. -> Interaction: Static display. -> Justification: Addresses specific user query about advanced e-commerce DB scenarios, promotes understanding of normalization and detailed tracking. Method: HTML/CSS tables for schema.
        - Report Info: Product Reviews -> Goal: Inform, Understand Business Logic -> Presentation: New entity Product_Reviews with attributes and explanation of purchase-based review logic. -> Interaction: Static display. -> Justification: Addresses user request for review system. Method: HTML/CSS table.
        - Report Info: Sales & Coupons -> Goal: Inform, Understand Business Logic -> Presentation: New entities Sales and Coupons with detailed attributes and their specific functionalities (dates, limits, scope). -> Interaction: Static display. -> Justification: Addresses user request for promotion systems. Method: HTML/CSS tables.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            border-bottom-width: 2px;
            border-color: #0284c7; /* sky-600 */
            color: #0284c7; /* sky-600 */
            font-weight: 600;
        }
        .accordion-content {
            display: none;
            transition: max-height 0.3s ease-out;
            overflow: hidden;
        }
        .accordion-button.active .accordion-icon {
            transform: rotate(180deg);
        }
        .entity-list-item.active {
            background-color: #d1fae5; /* emerald-100 */
            color: #059669; /* emerald-600 */
            font-weight: 500;
        }
        .relationship-list-item.active {
            background-color: #e0f2fe; /* sky-100 */
            color: #0284c7; /* sky-600 */
            font-weight: 500;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9; /* stone-100 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #94a3b8; /* stone-400 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* stone-500 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .tab-inner-content {
            padding: 1.5rem; /* p-6 */
        }
        table th, table td {
            padding: 0.75rem; /* p-3 */
            vertical-align: top;
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800">
    <header class="bg-sky-700 text-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl sm:text-2xl font-semibold">üìä Thi·∫øt K·∫ø CSDL S√†n Th∆∞∆°ng M·∫°i ƒêi·ªán T·ª≠</h1>
                <button id="mobileMenuButton" class="md:hidden p-2 rounded-md text-stone-200 hover:text-white hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                    <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
            <nav id="mainNav" class="md:flex md:space-x-2 border-t border-sky-600 md:border-none hidden md:block">
                <button class="tab-button active text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="entities">üß© C√°c Th·ª±c Th·ªÉ</button>
                <button class="tab-button text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="relationships">üîó M·ªëi Quan H·ªá</button>
                <button class="tab-button text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="constraints">üîí R√†ng Bu·ªôc</button>
                <button class="tab-button text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="expiration-repurpose">‚ôªÔ∏è HSD & T√°i Ch·∫ø</button>
                <button class="tab-button text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="product-reviews">‚≠ê ƒê√°nh Gi√° SP</button>
                <button class="tab-button text-sm font-medium py-3 px-2 xl:px-3 text-stone-100 hover:text-white hover:bg-sky-600 rounded-t-md" data-tab="promotions-coupons">üéÅ Khuy·∫øn M√£i & Coupon</button>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div id="entities" class="tab-content active bg-white shadow-lg rounded-lg">
            <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">I. X√°c ƒê·ªãnh C√°c Th·ª±c Th·ªÉ Ch√≠nh v√† Thu·ªôc T√≠nh</h2>
                <p class="mb-6 text-stone-700 leading-relaxed">Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu cho s√†n th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ ƒëa b√™n ƒë√≤i h·ªèi qu·∫£n l√Ω th√¥ng tin chi ti·∫øt cho nhi·ªÅu lo·∫°i ng∆∞·ªùi d√πng v√† ƒë·ªëi t∆∞·ª£ng kinh doanh. D∆∞·ªõi ƒë√¢y l√† c√°c th·ª±c th·ªÉ ch√≠nh v√† thu·ªôc t√≠nh c·ªßa ch√∫ng. Ch·ªçn m·ªôt th·ª±c th·ªÉ t·ª´ danh s√°ch b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt c√°c thu·ªôc t√≠nh v√† m√¥ t·∫£ c·ªßa n√≥.</p>
                <div class="md:flex md:space-x-6">
                    <div class="md:w-1/3 mb-6 md:mb-0">
                        <h3 class="text-lg font-semibold text-sky-600 mb-3">Danh s√°ch th·ª±c th·ªÉ:</h3>
                        <ul id="entityList" class="space-y-2 custom-scrollbar overflow-y-auto max-h-[calc(100vh-250px)] pr-2">
                        </ul>
                    </div>
                    <div id="entityDetail" class="md:w-2/3 p-4 border border-stone-200 rounded-lg bg-stone-50 min-h-[300px]">
                        <p class="text-stone-500 italic">Ch·ªçn m·ªôt th·ª±c th·ªÉ t·ª´ danh s√°ch ƒë·ªÉ xem chi ti·∫øt.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="relationships" class="tab-content bg-white shadow-lg rounded-lg">
             <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">II. M·ªëi Quan H·ªá Gi·ªØa C√°c Th·ª±c Th·ªÉ</h2>
                <p class="mb-4 text-stone-700 leading-relaxed">M·ªëi quan h·ªá l√† x∆∞∆°ng s·ªëng c·ªßa c∆° s·ªü d·ªØ li·ªáu quan h·ªá, ƒë·ªãnh nghƒ©a c√°ch c√°c th·ª±c th·ªÉ t∆∞∆°ng t√°c. Vi·ªác thi·∫øt l·∫≠p m·ªëi quan h·ªá ch√≠nh x√°c l√† r·∫•t quan tr·ªçng ƒë·ªÉ duy tr√¨ t√≠nh to√†n v·∫πn d·ªØ li·ªáu v√† cho ph√©p truy xu·∫•t th√¥ng tin hi·ªáu qu·∫£.</p>
                <div class="mb-6 p-4 border border-stone-200 rounded-lg bg-stone-50">
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">2.1. C√°c lo·∫°i m·ªëi quan h·ªá</h3>
                    <ul class="list-disc list-inside space-y-3 text-stone-700">
                        <li><strong>M·ªôt-m·ªôt (One-to-One - 1:1):</strong> M·ªói b·∫£n ghi ·ªü B·∫£ng A li√™n k·∫øt v·ªõi m·ªôt b·∫£n ghi ·ªü B·∫£ng B, v√† ng∆∞·ª£c l·∫°i. V√≠ d·ª•: `Users` v√† `User_Profiles` (n·∫øu th√¥ng tin h·ªì s∆° l·ªõn/nh·∫°y c·∫£m).</li>
                        <li><strong>M·ªôt-nhi·ªÅu (One-to-Many - 1:N):</strong> M·ªôt b·∫£n ghi ·ªü B·∫£ng A li√™n k·∫øt v·ªõi nhi·ªÅu b·∫£n ghi ·ªü B·∫£ng B, nh∆∞ng m·ªói b·∫£n ghi ·ªü B·∫£ng B ch·ªâ li√™n k·∫øt v·ªõi m·ªôt ·ªü B·∫£ng A. V√≠ d·ª•: M·ªôt `Kh√°ch h√†ng` c√≥ nhi·ªÅu `ƒê∆°n h√†ng`.</li>
                        <li><strong>Nhi·ªÅu-nhi·ªÅu (Many-to-Many - M:N):</strong> Nhi·ªÅu b·∫£n ghi ·ªü B·∫£ng A li√™n k·∫øt v·ªõi nhi·ªÅu b·∫£n ghi ·ªü B·∫£ng B, v√† ng∆∞·ª£c l·∫°i. C·∫ßn b·∫£ng trung gian. V√≠ d·ª•: `S·∫£n ph·∫©m` v√† `ƒê∆°n h√†ng` (th√¥ng qua `Chi ti·∫øt ƒê∆°n h√†ng`).</li>
                    </ul>
                </div>
                <div class="md:flex md:space-x-6">
                    <div class="md:w-1/3 mb-6 md:mb-0">
                        <h3 class="text-lg font-semibold text-sky-600 mb-3">Danh s√°ch m·ªëi quan h·ªá:</h3>
                        <ul id="relationshipList" class="space-y-2 custom-scrollbar overflow-y-auto max-h-[calc(100vh-400px)] pr-2">
                        </ul>
                    </div>
                    <div id="relationshipDetail" class="md:w-2/3 p-4 border border-stone-200 rounded-lg bg-stone-50 min-h-[200px]">
                        <p class="text-stone-500 italic">Ch·ªçn m·ªôt m·ªëi quan h·ªá t·ª´ danh s√°ch ƒë·ªÉ xem chi ti·∫øt.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="constraints" class="tab-content bg-white shadow-lg rounded-lg">
            <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">III. R√†ng Bu·ªôc (Constraints) trong C∆° S·ªü D·ªØ Li·ªáu SQL</h2>
                <p class="mb-6 text-stone-700 leading-relaxed">C√°c r√†ng bu·ªôc trong SQL l√† nh·ªØng quy t·∫Øc ƒë∆∞·ª£c √°p d·ª•ng cho c√°c c·ªôt ho·∫∑c b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu ƒë·ªÉ gi·ªõi h·∫°n lo·∫°i d·ªØ li·ªáu c√≥ th·ªÉ ƒë∆∞·ª£c l∆∞u tr·ªØ, ƒë·∫£m b·∫£o t√≠nh ch√≠nh x√°c, to√†n v·∫πn v√† ƒë√°ng tin c·∫≠y c·ªßa d·ªØ li·ªáu. Ch√∫ng gi√∫p ngƒÉn ch·∫∑n vi·ªác nh·∫≠p d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá ho·∫∑c kh√¥ng nh·∫•t qu√°n.</p>
                <div id="constraintsList" class="space-y-6">
                </div>
            </div>
        </div>

        <div id="expiration-repurpose" class="tab-content bg-white shadow-lg rounded-lg">
            <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">IV. Qu·∫£n L√Ω H·∫°n S·ª≠ D·ª•ng & T√°i Ch·∫ø S·∫£n Ph·∫©m</h2>
                <p class="mb-4 text-stone-700 leading-relaxed">Trong m·ªôt s·ªë ng√†nh h√†ng nh∆∞ th·ª±c ph·∫©m, d∆∞·ª£c ph·∫©m, vi·ªác qu·∫£n l√Ω h·∫°n s·ª≠ d·ª•ng (HSD) c·ªßa s·∫£n ph·∫©m l√† r·∫•t quan tr·ªçng. ƒê·ªìng th·ªùi, kh·∫£ nƒÉng t√°i ch·∫ø ho·∫∑c chuy·ªÉn ƒë·ªïi s·∫£n ph·∫©m g·∫ßn h·∫øt h·∫°n th√†nh m·ªôt d·∫°ng s·∫£n ph·∫©m kh√°c (v√≠ d·ª•: c√† r·ªët t∆∞∆°i th√†nh n∆∞·ªõc √©p c√† r·ªët) c√≥ th·ªÉ gi√∫p gi·∫£m thi·ªÉu l√£ng ph√≠ v√† t·ªëi ∆∞u h√≥a gi√° tr·ªã. Ph·∫ßn n√†y s·∫Ω th·∫£o lu·∫≠n v·ªÅ c√°ch m·ªü r·ªông m√¥ h√¨nh c∆° s·ªü d·ªØ li·ªáu ƒë·ªÉ gi·∫£i quy·∫øt c√°c y√™u c·∫ßu n√†y.</p>

                <div class="mb-8 p-6 border border-amber-300 rounded-lg bg-amber-50 shadow">
                    <h3 class="text-xl font-semibold text-amber-700 mb-3" id="problem-title"></h3>
                    <p class="text-stone-700 leading-relaxed" id="problem-description"></p>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-sky-600 mb-3" id="expiration-solution-title"></h3>
                    <p class="mb-4 text-stone-700 leading-relaxed" id="expiration-solution-description"></p>
                    <div class="p-4 border border-emerald-200 rounded-lg bg-emerald-50">
                        <h4 class="text-lg font-semibold text-emerald-700 mb-2" id="inventory-lot-table-name"></h4>
                        <div class="overflow-x-auto shadow rounded-md">
                            <table class="min-w-full bg-white border border-stone-200">
                                <thead class="bg-stone-100">
                                    <tr>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/FK/CHECK)</th>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                                    </tr>
                                </thead>
                                <tbody id="inventory-lot-attributes" class="divide-y divide-stone-200"></tbody>
                            </table>
                        </div>
                        <p class="mt-4 text-sm text-stone-600 leading-relaxed" id="expiration-solution-explanation"></p>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-sky-600 mb-3" id="repurposing-solution-title"></h3>
                    <p class="mb-4 text-stone-700 leading-relaxed" id="repurposing-solution-description"></p>
                    <div class="p-4 border border-emerald-200 rounded-lg bg-emerald-50">
                        <h4 class="text-lg font-semibold text-emerald-700 mb-2" id="product-transformation-table-name"></h4>
                        <div class="overflow-x-auto shadow rounded-md">
                            <table class="min-w-full bg-white border border-stone-200">
                                <thead class="bg-stone-100">
                                    <tr>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/FK)</th>
                                        <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                                    </tr>
                                </thead>
                                <tbody id="product-transformation-attributes" class="divide-y divide-stone-200"></tbody>
                            </table>
                        </div>
                        <p class="mt-4 text-sm text-stone-600 leading-relaxed" id="repurposing-solution-explanation"></p>
                    </div>
                </div>

                <div class="p-6 border border-rose-300 rounded-lg bg-rose-50 shadow">
                    <h3 class="text-xl font-semibold text-rose-700 mb-3" id="need-for-new-tables-title"></h3>
                    <p class="text-stone-700 leading-relaxed" id="need-for-new-tables-explanation"></p>
                </div>
            </div>
        </div>

        <div id="product-reviews" class="tab-content bg-white shadow-lg rounded-lg">
            <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">V. ƒê√°nh Gi√° S·∫£n Ph·∫©m (Product Reviews)</h2>
                <p class="mb-4 text-stone-700 leading-relaxed">H·ªá th·ªëng ƒë√°nh gi√° s·∫£n ph·∫©m l√† m·ªôt t√≠nh nƒÉng quan tr·ªçng gi√∫p ng∆∞·ªùi mua ƒë∆∞a ra quy·∫øt ƒë·ªãnh th√¥ng minh v√† cung c·∫•p ph·∫£n h·ªìi c√≥ gi√° tr·ªã cho ng∆∞·ªùi b√°n. ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh x√°c th·ª±c, ch·ªâ nh·ªØng ng∆∞·ªùi d√πng ƒë√£ mua s·∫£n ph·∫©m m·ªõi c√≥ th·ªÉ ƒë√°nh gi√°.</p>
                <div class="p-4 border border-emerald-200 rounded-lg bg-emerald-50 shadow">
                    <h3 class="text-xl font-semibold text-emerald-700 mb-3">Th·ª±c th·ªÉ: `Product_Reviews`</h3>
                    <p class="mb-4 text-stone-700 leading-relaxed">B·∫£ng n√†y l∆∞u tr·ªØ th√¥ng tin v·ªÅ c√°c ƒë√°nh gi√° s·∫£n ph·∫©m t·ª´ ng∆∞·ªùi d√πng.</p>
                    <div class="overflow-x-auto shadow rounded-md">
                        <table class="min-w-full bg-white border border-stone-200">
                            <thead class="bg-stone-100">
                                <tr>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/FK/R√†ng bu·ªôc)</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                                </tr>
                            </thead>
                            <tbody id="product-reviews-attributes" class="divide-y divide-stone-200">
                                </tbody>
                        </table>
                    </div>
                    <p class="mt-4 text-sm text-stone-600 leading-relaxed">
                        <strong>C√°ch ho·∫°t ƒë·ªông:</strong>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>Khi ng∆∞·ªùi d√πng mua m·ªôt s·∫£n ph·∫©m trong m·ªôt ƒë∆°n h√†ng, m·ªôt b·∫£n ghi `Order_Item` ƒë∆∞·ª£c t·∫°o.</li>
                            <li>Ng∆∞·ªùi d√πng ch·ªâ c√≥ th·ªÉ t·∫°o ƒë√°nh gi√° cho m·ªôt `product_id` c·ª• th·ªÉ th√¥ng qua m·ªôt `order_item_id` ƒë√£ mua. ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o r·∫±ng ƒë√°nh gi√° l√† h·ª£p l·ªá v√† li√™n quan ƒë·∫øn m·ªôt giao d·ªãch mua th·ª±c t·∫ø.</li>
                            <li>R√†ng bu·ªôc `UNIQUE (order_item_id)` ƒë·∫£m b·∫£o m·ªói m·ª•c s·∫£n ph·∫©m trong ƒë∆°n h√†ng ch·ªâ ƒë∆∞·ª£c ƒë√°nh gi√° m·ªôt l·∫ßn.</li>
                            <li>Tr·∫°ng th√°i `status` gi√∫p qu·∫£n tr·ªã vi√™n ki·ªÉm duy·ªát ƒë√°nh gi√° tr∆∞·ªõc khi hi·ªÉn th·ªã c√¥ng khai.</li>
                        </ul>
                    </p>
                </div>
            </div>
        </div>

        <div id="promotions-coupons" class="tab-content bg-white shadow-lg rounded-lg">
            <div class="tab-inner-content">
                <h2 class="text-2xl font-semibold text-sky-700 mb-6">VI. Khuy·∫øn M√£i (Sales) & M√£ Gi·∫£m Gi√° (Coupons)</h2>
                <p class="mb-4 text-stone-700 leading-relaxed">C√°c ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i v√† m√£ gi·∫£m gi√° l√† c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ thu h√∫t kh√°ch h√†ng, tƒÉng doanh s·ªë v√† qu·∫£n l√Ω t·ªìn kho. Ch√∫ng ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ linh ho·∫°t v√† c√≥ th·ªÉ √°p d·ª•ng theo nhi·ªÅu quy t·∫Øc kh√°c nhau.</p>

                <div class="mb-8 p-4 border border-blue-200 rounded-lg bg-blue-50 shadow">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">Th·ª±c th·ªÉ: `Sales` (Ch∆∞∆°ng Tr√¨nh Gi·∫£m Gi√° Chung)</h3>
                    <p class="mb-4 text-stone-700 leading-relaxed">B·∫£ng n√†y qu·∫£n l√Ω c√°c ch∆∞∆°ng tr√¨nh gi·∫£m gi√° t·ªïng th·ªÉ √°p d·ª•ng cho m·ªôt nh√≥m s·∫£n ph·∫©m ho·∫∑c to√†n b·ªô s√†n.</p>
                    <div class="overflow-x-auto shadow rounded-md">
                        <table class="min-w-full bg-white border border-stone-200">
                            <thead class="bg-stone-100">
                                <tr>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/R√†ng bu·ªôc)</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                                </tr>
                            </thead>
                            <tbody id="sales-attributes" class="divide-y divide-stone-200">
                                </tbody>
                        </table>
                    </div>
                    <p class="mt-4 text-sm text-stone-600 leading-relaxed">
                        <strong>C√°ch ho·∫°t ƒë·ªông:</strong>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>`Sales` ƒë·∫°i di·ªán cho c√°c s·ª± ki·ªán gi·∫£m gi√° l·ªõn (v√≠ d·ª•: 'Flash Sale', 'Gi·∫£m gi√° cu·ªëi nƒÉm').</li>
                            <li>`discount_type` v√† `discount_value` x√°c ƒë·ªãnh m·ª©c gi·∫£m gi√°.</li>
                            <li>`applies_to_scope` v√† `scope_value` cho ph√©p linh ho·∫°t √°p d·ª•ng cho to√†n b·ªô s·∫£n ph·∫©m, m·ªôt s·ªë danh m·ª•c ho·∫∑c s·∫£n ph·∫©m c·ª• th·ªÉ.</li>
                            <li>Gi√° cu·ªëi c√πng c·ªßa s·∫£n ph·∫©m tr√™n s√†n s·∫Ω ƒë∆∞·ª£c t√≠nh to√°n d·ª±a tr√™n gi√° g·ªëc v√† c√°c ch∆∞∆°ng tr√¨nh `Sales` ƒëang ho·∫°t ƒë·ªông.</li>
                        </ul>
                    </p>
                </div>

                <div class="p-4 border border-purple-200 rounded-lg bg-purple-50 shadow">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Th·ª±c th·ªÉ: `Coupons` (M√£ Gi·∫£m Gi√°)</h3>
                    <p class="mb-4 text-stone-700 leading-relaxed">B·∫£ng n√†y qu·∫£n l√Ω c√°c m√£ gi·∫£m gi√° c√° nh√¢n ho·∫∑c c√¥ng khai m√† ng∆∞·ªùi d√πng c√≥ th·ªÉ √°p d·ª•ng khi thanh to√°n.</p>
                    <div class="overflow-x-auto shadow rounded-md">
                        <table class="min-w-full bg-white border border-stone-200">
                            <thead class="bg-stone-100">
                                <tr>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/R√†ng bu·ªôc)</th>
                                    <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                                </tr>
                            </thead>
                            <tbody id="coupons-attributes" class="divide-y divide-stone-200">
                                </tbody>
                        </table>
                    </div>
                    <p class="mt-4 text-sm text-stone-600 leading-relaxed">
                        <strong>C√°ch ho·∫°t ƒë·ªông:</strong>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>Ng∆∞·ªùi d√πng nh·∫≠p `code` c·ªßa coupon khi thanh to√°n.</li>
                            <li>H·ªá th·ªëng ki·ªÉm tra `start_date`, `expiration_date`, `quantity_available`, `usage_limit_per_customer` v√† `applies_to_scope` ƒë·ªÉ x√°c ƒë·ªãnh t√≠nh h·ª£p l·ªá c·ªßa coupon.</li>
                            <li>N·∫øu h·ª£p l·ªá, `discount_value` s·∫Ω ƒë∆∞·ª£c √°p d·ª•ng cho ƒë∆°n h√†ng. `is_free_shipping` s·∫Ω ƒë∆∞·ª£c ki·ªÉm tra ƒë·ªÉ mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn.</li>
                            <li>Khi coupon ƒë∆∞·ª£c s·ª≠ d·ª•ng, `quantity_available` (n·∫øu c√≥) s·∫Ω gi·∫£m v√† l·ªãch s·ª≠ s·ª≠ d·ª•ng c·ªßa kh√°ch h√†ng s·∫Ω ƒë∆∞·ª£c ghi l·∫°i (c√≥ th·ªÉ trong b·∫£ng `User_Coupon_Usage` ri√™ng ho·∫∑c trong b·∫£ng `Orders`).</li>
                        </ul>
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center p-4 text-sm text-stone-600 border-t border-stone-200 mt-8">
        ·ª®ng d·ª•ng t∆∞∆°ng t√°c d·ª±a tr√™n b√°o c√°o thi·∫øt k·∫ø CSDL eCommerce.
    </footer>

<script>
const entitiesData = {
    "Users": {
        name: "Ng∆∞·ªùi d√πng (User)",
        description: "B·∫£ng n√†y l∆∞u tr·ªØ th√¥ng tin chung cho t·∫•t c·∫£ c√°c lo·∫°i ng∆∞·ªùi d√πng tr√™n n·ªÅn t·∫£ng.",
        attributes: [
            { name: "user_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói ng∆∞·ªùi d√πng." },
            { name: "username", type: "UNIQUE, NOT NULL", details: "T√™n ƒëƒÉng nh·∫≠p, ph·∫£i l√† duy nh·∫•t." },
            { name: "email", type: "UNIQUE, NOT NULL", details: "ƒê·ªãa ch·ªâ email (duy nh·∫•t, d√πng cho ƒëƒÉng nh·∫≠p v√† li√™n h·ªá)." },
            { name: "password_hash", type: "NOT NULL", details: "M·∫≠t kh·∫©u ƒë√£ bƒÉm (ƒë·ªÉ b·∫£o m·∫≠t)." },
            { name: "first_name", type: "", details: "T√™n c·ªßa ng∆∞·ªùi d√πng." },
            { name: "last_name", type: "", details: "H·ªç c·ªßa ng∆∞·ªùi d√πng." },
            { name: "phone_number", type: "UNIQUE", details: "S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá (c√≥ th·ªÉ l√† duy nh·∫•t)." },
            { name: "registration_date", type: "NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y ng∆∞·ªùi d√πng ƒëƒÉng k√Ω t√†i kho·∫£n." },
            { name: "last_login_date", type: "", details: "Ng√†y ƒëƒÉng nh·∫≠p cu·ªëi c√πng c·ªßa ng∆∞·ªùi d√πng." },
            { name: "status", type: "NOT NULL, DEFAULT 'active'", details: "Tr·∫°ng th√°i t√†i kho·∫£n (v√≠ d·ª•: 'active', 'inactive', 'suspended'). CHECK (`status` IN ('active', 'inactive', 'suspended'))" },
            { name: "role", type: "NOT NULL", details: "Vai tr√≤ c·ªßa ng∆∞·ªùi d√πng. CHECK (`role` IN ('buyer', 'seller', 'admin'))" }
        ]
    },
    "Sellers": {
        name: "Ng∆∞·ªùi b√°n (Seller)",
        description: "B·∫£ng n√†y m·ªü r·ªông th√¥ng tin cho ng∆∞·ªùi d√πng c√≥ vai tr√≤ l√† ng∆∞·ªùi b√°n, ch·ª©a c√°c thu·ªôc t√≠nh ƒë·∫∑c th√π c·ªßa nh√† cung c·∫•p.",
        attributes: [
            { name: "seller_id", type: "PK, FK (Users.user_id)", details: "M√£ ƒë·ªãnh danh ng∆∞·ªùi b√°n, li√™n k·∫øt v·ªõi Users." },
            { name: "store_name", type: "NOT NULL", details: "T√™n c·ª≠a h√†ng ho·∫∑c th∆∞∆°ng hi·ªáu." },
            { name: "store_description", type: "", details: "M√¥ t·∫£ chi ti·∫øt v·ªÅ c·ª≠a h√†ng." },
            { name: "bank_account_details", type: "", details: "Th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng (c·∫ßn m√£ h√≥a)." },
            { name: "tax_id", type: "UNIQUE", details: "M√£ s·ªë thu·∫ø (n·∫øu c√≥, th∆∞·ªùng l√† duy nh·∫•t)." },
            { name: "seller_rating", type: "DEFAULT 0", details: "ƒêi·ªÉm ƒë√°nh gi√° trung b√¨nh. CHECK (`seller_rating` >= 0 AND `seller_rating` <= 5)" },
            { name: "join_date", type: "NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y ng∆∞·ªùi b√°n tham gia." },
            { name: "is_verified", type: "BOOLEAN, DEFAULT FALSE", details: "Tr·∫°ng th√°i x√°c minh." }
        ]
    },
    "Admins": {
        name: "Qu·∫£n tr·ªã vi√™n (Admin)",
        description: "B·∫£ng n√†y m·ªü r·ªông th√¥ng tin cho ng∆∞·ªùi d√πng c√≥ vai tr√≤ l√† qu·∫£n tr·ªã vi√™n.",
        attributes: [
            { name: "admin_id", type: "PK, FK (Users.user_id)", details: "M√£ ƒë·ªãnh danh qu·∫£n tr·ªã vi√™n, li√™n k·∫øt v·ªõi Users." },
            { name: "permissions", type: "", details: "Quy·ªÅn h·∫°n c·ª• th·ªÉ (v√≠ d·ª•: JSON ho·∫∑c text, c√≥ th·ªÉ tham chi·∫øu b·∫£ng Permissions ri√™ng)." },
            { name: "last_action_log", type: "", details: "Nh·∫≠t k√Ω h√†nh ƒë·ªông cu·ªëi c√πng." }
        ]
    },
    "Addresses": {
        name: "ƒê·ªãa ch·ªâ (Address)",
        description: "L∆∞u tr·ªØ ƒë·ªãa ch·ªâ thanh to√°n v√† giao h√†ng c·ªßa kh√°ch h√†ng.",
        attributes: [
            { name: "address_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho ƒë·ªãa ch·ªâ." },
            { name: "user_id", type: "FK (Users.user_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi ng∆∞·ªùi d√πng s·ªü h·ªØu ƒë·ªãa ch·ªâ." },
            { name: "street_address", type: "NOT NULL", details: "S·ªë nh√†, t√™n ƒë∆∞·ªùng." },
            { name: "city", type: "NOT NULL", details: "Th√†nh ph·ªë." },
            { name: "state", type: "NOT NULL", details: "T·ªânh/Bang." },
            { name: "postal_code", type: "NOT NULL", details: "M√£ b∆∞u ch√≠nh." },
            { name: "country", type: "NOT NULL", details: "Qu·ªëc gia." },
            { name: "address_type", type: "NOT NULL", details: "Lo·∫°i ƒë·ªãa ch·ªâ. CHECK (`address_type` IN ('shipping', 'billing', 'home', 'work'))" },
            { name: "is_default", type: "BOOLEAN, DEFAULT FALSE", details: "C·ªù ch·ªâ ƒë·ªãnh ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh." }
        ]
    },
    "Categories": {
        name: "Danh m·ª•c (Category)",
        description: "T·ªï ch·ª©c c√°c danh m·ª•c s·∫£n ph·∫©m, gi√∫p ng∆∞·ªùi d√πng d·ªÖ d√†ng ƒëi·ªÅu h∆∞·ªõng.",
        attributes: [
            { name: "category_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho danh m·ª•c." },
            { name: "name", type: "UNIQUE, NOT NULL", details: "T√™n danh m·ª•c, ph·∫£i l√† duy nh·∫•t." },
            { name: "description", type: "", details: "M√¥ t·∫£ danh m·ª•c." },
            { name: "parent_category_id", type: "FK (Categories.category_id)", details: "Cho ph√©p c·∫•u tr√∫c danh m·ª•c ph√¢n c·∫•p (c√≥ th·ªÉ NULL)." }
        ]
    },
    "Products": {
        name: "S·∫£n ph·∫©m (Product)",
        description: "L∆∞u tr·ªØ th√¥ng tin chi ti·∫øt c·ªßa t·∫•t c·∫£ c√°c s·∫£n ph·∫©m ƒë∆∞·ª£c b√°n tr√™n n·ªÅn t·∫£ng.",
        attributes: [
            { name: "product_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho s·∫£n ph·∫©m." },
            { name: "seller_id", type: "FK (Sellers.seller_id), NOT NULL", details: "Li√™n k·∫øt s·∫£n ph·∫©m v·ªõi ng∆∞·ªùi b√°n." },
            { name: "category_id", type: "FK (Categories.category_id), NOT NULL", details: "Li√™n k·∫øt s·∫£n ph·∫©m v·ªõi danh m·ª•c." },
            { name: "name", type: "NOT NULL", details: "T√™n s·∫£n ph·∫©m." },
            { name: "sku", type: "UNIQUE", details: "M√£ SKU (Stock Keeping Unit), n·∫øu c√≥, ph·∫£i l√† duy nh·∫•t." },
            { name: "description", type: "", details: "M√¥ t·∫£ chi ti·∫øt s·∫£n ph·∫©m." },
            { name: "price", type: "DECIMAL(10,2), NOT NULL", details: "Gi√° b√°n c·ªßa s·∫£n ph·∫©m. CHECK (`price` > 0)" },
            { name: "original_price", type: "DECIMAL(10,2)", details: "Gi√° g·ªëc tr∆∞·ªõc chi·∫øt kh·∫•u. CHECK (`original_price` IS NULL OR `original_price` > 0)" },
            { name: "stock_quantity", type: "INTEGER, NOT NULL, DEFAULT 0", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m c√≤n trong kho (t·ªïng h·ª£p t·ª´ Inventory_Lot). CHECK (`stock_quantity` >= 0)" },
            { name: "image_url", type: "", details: "ƒê∆∞·ªùng d·∫´n ƒë·∫øn h√¨nh ·∫£nh ch√≠nh." },
            { name: "status", type: "NOT NULL, DEFAULT 'available'", details: "Tr·∫°ng th√°i s·∫£n ph·∫©m. CHECK (`status` IN ('available', 'out_of_stock', 'discontinued', 'hidden'))" },
            { name: "is_recyclable", type: "BOOLEAN, NOT NULL, DEFAULT FALSE", details: "C·ªù ch·ªâ ƒë·ªãnh s·∫£n ph·∫©m c√≥ th·ªÉ t√°i ch·∫ø/chuy·ªÉn ƒë·ªïi th√†nh s·∫£n ph·∫©m kh√°c hay kh√¥ng." },
            { name: "created_at", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Th·ªùi gian t·∫°o." },
            { name: "updated_at", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP", details: "Th·ªùi gian c·∫≠p nh·∫≠t." }
        ]
    },
    "Orders": {
        name: "ƒê∆°n h√†ng (Order)",
        description: "Qu·∫£n l√Ω v√† x·ª≠ l√Ω ƒë∆°n h√†ng c·ªßa kh√°ch h√†ng.",
        attributes: [
            { name: "order_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói ƒë∆°n h√†ng." },
            { name: "user_id", type: "FK (Users.user_id), NOT NULL", details: "Li√™n k·∫øt ƒë∆°n h√†ng v·ªõi ng∆∞·ªùi d√πng ƒë·∫∑t h√†ng." },
            { name: "order_date", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y v√† gi·ªù ƒë·∫∑t h√†ng." },
            { name: "total_amount", type: "DECIMAL(12,2), NOT NULL", details: "T·ªïng gi√° tr·ªã c·ªßa ƒë∆°n h√†ng. CHECK (`total_amount` >= 0)" },
            { name: "status", type: "NOT NULL, DEFAULT 'pending'", details: "Tr·∫°ng th√°i ƒë∆°n h√†ng. CHECK (`status` IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled', 'refunded'))" },
            { name: "shipping_address_id", type: "FK (Addresses.address_id), NOT NULL", details: "ƒê·ªãa ch·ªâ giao h√†ng." },
            { name: "billing_address_id", type: "FK (Addresses.address_id), NOT NULL", details: "ƒê·ªãa ch·ªâ thanh to√°n." },
            { name: "payment_method_id", type: "FK (PaymentMethods.method_id)", details: "Ph∆∞∆°ng th·ª©c thanh to√°n." },
            { name: "notes", type: "TEXT", details: "Ghi ch√∫ th√™m v·ªÅ ƒë∆°n h√†ng." }
        ]
    },
    "Order_Items": {
        name: "Chi ti·∫øt ƒê∆°n h√†ng (Order Item)",
        description: "Ch·ª©a th√¥ng tin chi ti·∫øt c·ªßa t·ª´ng m·∫∑t h√†ng trong m·ªôt ƒë∆°n h√†ng.",
        attributes: [
            { name: "order_item_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho chi ti·∫øt ƒë∆°n h√†ng." },
            { name: "order_id", type: "FK (Orders.order_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi ƒë∆°n h√†ng." },
            { name: "product_id", type: "FK (Products.product_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi s·∫£n ph·∫©m." },
            { name: "quantity", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m ƒë·∫∑t. CHECK (`quantity` > 0)" },
            { name: "price_at_purchase", type: "DECIMAL(10,2), NOT NULL", details: "Gi√° s·∫£n ph·∫©m t·∫°i th·ªùi ƒëi·ªÉm mua. CHECK (`price_at_purchase` > 0)" },
            { name: "seller_id", type: "FK (Sellers.seller_id), NOT NULL", details: "Ng∆∞·ªùi b√°n c·ªßa s·∫£n ph·∫©m n√†y trong ƒë∆°n h√†ng." }
        ]
    },
    "Payment_Methods": {
        name: "Ph∆∞∆°ng th·ª©c Thanh to√°n (Payment Method)",
        description: "L∆∞u tr·ªØ th√¥ng tin v·ªÅ c√°c ph∆∞∆°ng th·ª©c thanh to√°n kh√°c nhau.",
        attributes: [
            { name: "method_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t." },
            { name: "name", type: "VARCHAR(50), UNIQUE, NOT NULL", details: "T√™n ph∆∞∆°ng th·ª©c (v√≠ d·ª•: 'Credit Card', 'PayPal')." },
            { name: "description", type: "TEXT", details: "M√¥ t·∫£ chi ti·∫øt." },
            { name: "is_active", type: "BOOLEAN, NOT NULL, DEFAULT TRUE", details: "C·ªù ch·ªâ ƒë·ªãnh ph∆∞∆°ng th·ª©c c√≥ ho·∫°t ƒë·ªông kh√¥ng." }
        ]
    },
    "Payments": {
        name: "Thanh to√°n (Payment)",
        description: "L∆∞u tr·ªØ th√¥ng tin chi ti·∫øt v·ªÅ t·ª´ng giao d·ªãch thanh to√°n th·ª±c t·∫ø.",
        attributes: [
            { name: "payment_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho giao d·ªãch." },
            { name: "order_id", type: "FK (Orders.order_id), UNIQUE, NOT NULL", details: "Li√™n k·∫øt v·ªõi ƒë∆°n h√†ng (th∆∞·ªùng l√† 1:1 v·ªõi Order)." },
            { name: "method_id", type: "FK (PaymentMethods.method_id), NOT NULL", details: "Ph∆∞∆°ng th·ª©c thanh to√°n s·ª≠ d·ª•ng." },
            { name: "amount", type: "DECIMAL(12,2), NOT NULL", details: "S·ªë ti·ªÅn ƒë√£ thanh to√°n. CHECK (`amount` > 0)" },
            { name: "payment_date", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y v√† gi·ªù thanh to√°n." },
            { name: "status", type: "VARCHAR(20), NOT NULL", details: "Tr·∫°ng th√°i thanh to√°n. CHECK (`status` IN ('pending', 'completed', 'failed', 'refunded'))" },
            { name: "transaction_id_gateway", type: "VARCHAR(255), UNIQUE", details: "M√£ giao d·ªãch t·ª´ c·ªïng thanh to√°n (n·∫øu c√≥, th∆∞·ªùng l√† duy nh·∫•t)." },
            { name: "user_id", type: "FK (Users.user_id), NOT NULL", details: "Ng∆∞·ªùi d√πng th·ª±c hi·ªán thanh to√°n." }
        ]
    },
    "Delivery_Partners": {
        name: "ƒê∆°n v·ªã V·∫≠n chuy·ªÉn (Delivery Partner)",
        description: "L∆∞u tr·ªØ th√¥ng tin v·ªÅ c√°c ƒë·ªëi t√°c v·∫≠n chuy·ªÉn.",
        attributes: [
            { name: "partner_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t." },
            { name: "name", type: "VARCHAR(100), UNIQUE, NOT NULL", details: "T√™n ƒë∆°n v·ªã v·∫≠n chuy·ªÉn." },
            { name: "contact_person", type: "VARCHAR(100)", details: "Ng∆∞·ªùi li√™n h·ªá." },
            { name: "phone_number", type: "VARCHAR(20), UNIQUE", details: "S·ªë ƒëi·ªán tho·∫°i." },
            { name: "email", type: "VARCHAR(100), UNIQUE", details: "ƒê·ªãa ch·ªâ email." },
            { name: "service_area", type: "TEXT", details: "Khu v·ª±c ho·∫°t ƒë·ªông." },
            { name: "rating", type: "DECIMAL(2,1)", details: "ƒê√°nh gi√° trung b√¨nh. CHECK (`rating` IS NULL OR (`rating` >= 0 AND `rating` <= 5))" }
        ]
    },
    "Shipments": {
        name: "V·∫≠n chuy·ªÉn (Shipment)",
        description: "Theo d√µi th√¥ng tin chi ti·∫øt v·ªÅ t·ª´ng l√¥ h√†ng ƒë∆∞·ª£c giao.",
        attributes: [
            { name: "shipment_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho l√¥ h√†ng." },
            { name: "order_id", type: "FK (Orders.order_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi ƒë∆°n h√†ng." },
            { name: "delivery_partner_id", type: "FK (DeliveryPartners.partner_id)", details: "ƒê∆°n v·ªã v·∫≠n chuy·ªÉn ch·ªãu tr√°ch nhi·ªám." },
            { name: "tracking_number", type: "VARCHAR(100), UNIQUE", details: "M√£ theo d√µi l√¥ h√†ng (th∆∞·ªùng l√† duy nh·∫•t)." },
            { name: "shipping_date", type: "TIMESTAMP", details: "Ng√†y g·ª≠i h√†ng." },
            { name: "estimated_delivery_date", type: "DATE", details: "Ng√†y giao d·ª± ki·∫øn." },
            { name: "actual_delivery_date", type: "DATE", details: "Ng√†y giao th·ª±c t·∫ø." },
            { name: "status", type: "VARCHAR(50), NOT NULL", details: "Tr·∫°ng th√°i v·∫≠n chuy·ªÉn. CHECK (`status` IN ('pending_pickup', 'in_transit', 'out_for_delivery', 'delivered', 'failed_delivery', 'returned'))" },
            { name: "shipping_cost", type: "DECIMAL(10,2)", details: "Chi ph√≠ v·∫≠n chuy·ªÉn. CHECK (`shipping_cost` IS NULL OR `shipping_cost` >= 0)" },
            { name: "shipping_address_id", type: "FK (Addresses.address_id), NOT NULL", details: "ƒê·ªãa ch·ªâ giao h√†ng." }
        ]
    },
    "Inventory_Lot": {
        name: "L√¥ H√†ng T·ªìn Kho (Inventory_Lot)",
        description: "L∆∞u tr·ªØ th√¥ng tin chi ti·∫øt v·ªÅ t·ª´ng l√¥ h√†ng t·ªìn kho c·ªßa s·∫£n ph·∫©m, bao g·ªìm h·∫°n s·ª≠ d·ª•ng.",
        attributes: [
            { name: "lot_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói l√¥ h√†ng t·ªìn kho." },
            { name: "product_id", type: "FK (Products.product_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi s·∫£n ph·∫©m m√† l√¥ h√†ng n√†y thu·ªôc v·ªÅ." },
            { name: "seller_id", type: "FK (Sellers.seller_id), NOT NULL", details: "Ng∆∞·ªùi b√°n s·ªü h·ªØu l√¥ h√†ng n√†y." },
            { name: "quantity_in_lot", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong l√¥ n√†y. CHECK (`quantity_in_lot` >= 0)" },
            { name: "received_date", type: "DATE", details: "Ng√†y nh·∫≠n l√¥ h√†ng v√†o kho." },
            { name: "manufacturing_date", type: "DATE", details: "Ng√†y s·∫£n xu·∫•t c·ªßa l√¥ h√†ng (n·∫øu c√≥)." },
            { name: "expiration_date", type: "DATE, NOT NULL", details: "Ng√†y h·∫øt h·∫°n c·ªßa l√¥ s·∫£n ph·∫©m." },
            { name: "status", type: "VARCHAR(50), DEFAULT 'available'", details: "Tr·∫°ng th√°i c·ªßa l√¥ h√†ng. CHECK (`status` IN ('available', 'nearing_expiry', 'expired', 'repurposed', 'sold_out'))" },
            { name: "cost_price_per_unit", type: "DECIMAL(10,2)", details: "Gi√° v·ªën m·ªói ƒë∆°n v·ªã c·ªßa l√¥ h√†ng n√†y (ƒë·ªÉ t√≠nh to√°n l·ª£i nhu·∫≠n)." },
            { name: "location_in_warehouse", type: "VARCHAR(100)", details: "V·ªã tr√≠ l∆∞u tr·ªØ c·ª• th·ªÉ trong kho." }
        ]
    },
    "Product_Transformation": {
        name: "Chuy·ªÉn ƒê·ªïi S·∫£n Ph·∫©m (Product_Transformation)",
        description: "Ghi l·∫°i c√°c giao d·ªãch chuy·ªÉn ƒë·ªïi s·∫£n ph·∫©m, ƒë·∫∑c bi·ªát l√† t·ª´ s·∫£n ph·∫©m g·ªëc sang s·∫£n ph·∫©m t√°i ch·∫ø/m·ªõi.",
        attributes: [
            { name: "transformation_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói giao d·ªãch chuy·ªÉn ƒë·ªïi." },
            { name: "source_lot_id", type: "FK (Inventory_Lot.lot_id), NOT NULL", details: "L√¥ h√†ng g·ªëc ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ chuy·ªÉn ƒë·ªïi." },
            { name: "source_product_id", type: "FK (Products.product_id), NOT NULL", details: "S·∫£n ph·∫©m g·ªëc ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi (ƒë·ªÉ d·ªÖ truy v·∫•n)." },
            { name: "quantity_transformed", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m g·ªëc ƒë√£ s·ª≠ d·ª•ng trong qu√° tr√¨nh chuy·ªÉn ƒë·ªïi. CHECK (`quantity_transformed` > 0)" },
            { name: "derived_product_id", type: "FK (Products.product_id), NOT NULL", details: "S·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c t·∫°o ra sau chuy·ªÉn ƒë·ªïi (c≈©ng l√† m·ªôt Product trong b·∫£ng Products)." },
            { name: "derived_quantity_produced", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c t·∫°o ra. CHECK (`derived_quantity_produced` > 0)" },
            { name: "transformation_date", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y v√† gi·ªù th·ª±c hi·ªán chuy·ªÉn ƒë·ªïi." },
            { name: "reason", type: "TEXT", details: "L√Ω do chuy·ªÉn ƒë·ªïi (v√≠ d·ª•: 'nearing_expiry', 'damaged_packaging_repurposed')." },
            { name: "transformed_by_user_id", type: "FK (Users.user_id)", details: "Ng∆∞·ªùi d√πng (admin/seller) th·ª±c hi·ªán chuy·ªÉn ƒë·ªïi." },
            { name: "notes", type: "TEXT", details: "Ghi ch√∫ th√™m v·ªÅ qu√° tr√¨nh chuy·ªÉn ƒë·ªïi." }
        ]
    },
    "Product_Reviews": {
        name: "ƒê√°nh Gi√° S·∫£n Ph·∫©m (Product_Reviews)",
        description: "L∆∞u tr·ªØ c√°c ƒë√°nh gi√° v√† x·∫øp h·∫°ng c·ªßa ng∆∞·ªùi d√πng cho t·ª´ng s·∫£n ph·∫©m ƒë√£ mua.",
        attributes: [
            { name: "review_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho ƒë√°nh gi√°." },
            { name: "product_id", type: "FK (Products.product_id), NOT NULL", details: "S·∫£n ph·∫©m ƒë∆∞·ª£c ƒë√°nh gi√°." },
            { name: "user_id", type: "FK (Users.user_id), NOT NULL", details: "Ng∆∞·ªùi d√πng ƒë√£ th·ª±c hi·ªán ƒë√°nh gi√°." },
            { name: "order_item_id", type: "FK (Order_Items.order_item_id), UNIQUE, NOT NULL", details: "M·ª•c ƒë∆°n h√†ng c·ª• th·ªÉ m√† s·∫£n ph·∫©m ƒë∆∞·ª£c mua. ƒê·∫£m b·∫£o ng∆∞·ªùi d√πng ch·ªâ ƒë√°nh gi√° s·∫£n ph·∫©m ƒë√£ mua v√† m·ªói m·ª•c ƒë∆°n h√†ng ch·ªâ ƒë∆∞·ª£c ƒë√°nh gi√° m·ªôt l·∫ßn." },
            { name: "rating", type: "INTEGER, NOT NULL", details: "ƒêi·ªÉm ƒë√°nh gi√° (v√≠ d·ª•: 1 ƒë·∫øn 5 sao). CHECK (`rating` >= 1 AND `rating` <= 5)" },
            { name: "comment", type: "TEXT", details: "N·ªôi dung b√¨nh lu·∫≠n c·ªßa ƒë√°nh gi√°." },
            { name: "review_date", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y v√† gi·ªù ƒë√°nh gi√°." },
            { name: "status", type: "VARCHAR(20), NOT NULL, DEFAULT 'pending'", details: "Tr·∫°ng th√°i ƒë√°nh gi√° (v√≠ d·ª•: 'pending', 'approved', 'rejected')." }
        ]
    },
    "Sales": {
        name: "Ch∆∞∆°ng Tr√¨nh Gi·∫£m Gi√° (Sales)",
        description: "Qu·∫£n l√Ω c√°c ch∆∞∆°ng tr√¨nh gi·∫£m gi√° t·ªïng th·ªÉ √°p d·ª•ng cho s·∫£n ph·∫©m tr√™n s√†n.",
        attributes: [
            { name: "sale_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho ch∆∞∆°ng tr√¨nh gi·∫£m gi√°." },
            { name: "name", type: "VARCHAR(100), NOT NULL", details: "T√™n ch∆∞∆°ng tr√¨nh gi·∫£m gi√° (v√≠ d·ª•: 'Black Friday Sale')." },
            { name: "description", type: "TEXT", details: "M√¥ t·∫£ chi ti·∫øt ch∆∞∆°ng tr√¨nh." },
            { name: "discount_type", type: "VARCHAR(20), NOT NULL", details: "Lo·∫°i gi·∫£m gi√° ('percentage', 'fixed_amount')." },
            { name: "discount_value", type: "DECIMAL(10,2), NOT NULL", details: "Gi√° tr·ªã gi·∫£m gi√° (v√≠ d·ª•: 0.10 cho 10%, 50000 cho 50.000 VNƒê)." },
            { name: "start_date", type: "TIMESTAMP, NOT NULL", details: "Ng√†y b·∫Øt ƒë·∫ßu ch∆∞∆°ng tr√¨nh." },
            { name: "end_date", type: "TIMESTAMP, NOT NULL", details: "Ng√†y k·∫øt th√∫c ch∆∞∆°ng tr√¨nh." },
            { name: "applies_to_scope", type: "VARCHAR(50), NOT NULL", details: "Ph·∫°m vi √°p d·ª•ng ('all_products', 'specific_categories', 'specific_products')." },
            { name: "scope_value", type: "TEXT", details: "Gi√° tr·ªã ph·∫°m vi (v√≠ d·ª•: 'category_ids: [1,2,3]' ho·∫∑c 'product_ids: [101,102]'). C√≥ th·ªÉ l√† JSON ho·∫∑c danh s√°ch ID ph√¢n c√°ch b·∫±ng d·∫•u ph·∫©y." },
            { name: "status", type: "VARCHAR(20), NOT NULL, DEFAULT 'active'", details: "Tr·∫°ng th√°i ch∆∞∆°ng tr√¨nh ('active', 'inactive', 'scheduled', 'ended')." },
            { name: "created_at", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Th·ªùi gian t·∫°o b·∫£n ghi." }
        ]
    },
    "Coupons": {
        name: "M√£ Gi·∫£m Gi√° (Coupons)",
        description: "Qu·∫£n l√Ω c√°c m√£ gi·∫£m gi√° c·ª• th·ªÉ m√† ng∆∞·ªùi d√πng c√≥ th·ªÉ √°p d·ª•ng.",
        attributes: [
            { name: "coupon_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m√£ gi·∫£m gi√°." },
            { name: "code", type: "VARCHAR(50), UNIQUE, NOT NULL", details: "M√£ coupon (v√≠ d·ª•: 'FREESHIP2023')." },
            { name: "description", type: "TEXT", details: "M√¥ t·∫£ m√£ gi·∫£m gi√°." },
            { name: "discount_type", type: "VARCHAR(20), NOT NULL", details: "Lo·∫°i gi·∫£m gi√° ('percentage', 'fixed_amount', 'free_shipping')." },
            { name: "discount_value", type: "DECIMAL(10,2)", details: "Gi√° tr·ªã gi·∫£m gi√° (n·∫øu c√≥, kh√¥ng √°p d·ª•ng cho freeship)." },
            { name: "start_date", type: "TIMESTAMP, NOT NULL", details: "Ng√†y b·∫Øt ƒë·∫ßu hi·ªáu l·ª±c." },
            { name: "expiration_date", type: "TIMESTAMP, NOT NULL", details: "Ng√†y h·∫øt h·∫°n hi·ªáu l·ª±c." },
            { name: "is_free_shipping", type: "BOOLEAN, NOT NULL, DEFAULT FALSE", details: "C√≥ mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn hay kh√¥ng." },
            { name: "quantity_available", type: "INTEGER", details: "S·ªë l∆∞·ª£ng m√£ coupon c√≤n l·∫°i (NULL n·∫øu kh√¥ng gi·ªõi h·∫°n). CHECK (`quantity_available` IS NULL OR `quantity_available` >= 0)" },
            { name: "usage_limit_per_customer", type: "INTEGER", details: "S·ªë l·∫ßn s·ª≠ d·ª•ng t·ªëi ƒëa cho m·ªói kh√°ch h√†ng (NULL n·∫øu kh√¥ng gi·ªõi h·∫°n). CHECK (`usage_limit_per_customer` IS NULL OR `usage_limit_per_customer` >= 0)" },
            { name: "applies_to_scope", type: "VARCHAR(50), NOT NULL", details: "Ph·∫°m vi √°p d·ª•ng ('all_products', 'specific_categories', 'specific_products')." },
            { name: "scope_value", type: "TEXT", details: "Gi√° tr·ªã ph·∫°m vi (v√≠ d·ª•: 'category_ids: [1,2,3]' ho·∫∑c 'product_ids: [101,102]')." },
            { name: "min_order_amount", type: "DECIMAL(12,2)", details: "S·ªë ti·ªÅn ƒë∆°n h√†ng t·ªëi thi·ªÉu ƒë·ªÉ √°p d·ª•ng coupon (NULL n·∫øu kh√¥ng c√≥)." },
            { name: "max_discount_amount", type: "DECIMAL(10,2)", details: "S·ªë ti·ªÅn gi·∫£m gi√° t·ªëi ƒëa (NULL n·∫øu kh√¥ng c√≥)." },
            { name: "status", type: "VARCHAR(20), NOT NULL, DEFAULT 'active'", details: "Tr·∫°ng th√°i coupon ('active', 'inactive', 'expired')." },
            { name: "created_at", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Th·ªùi gian t·∫°o b·∫£n ghi." }
        ]
    }
};

const relationshipsData = [
    { name: "Users - Addresses", type: "1:N", from: "Users", to: "Addresses", details: "M·ªôt ng∆∞·ªùi d√πng c√≥ th·ªÉ c√≥ nhi·ªÅu ƒë·ªãa ch·ªâ. `Addresses.user_id` (FK) -> `Users.user_id` (PK)." },
    { name: "Users - Sellers", type: "1:1 (ho·∫∑c 1:0..1)", from: "Users", to: "Sellers", details: "M·ªôt ng∆∞·ªùi d√πng c√≥ th·ªÉ l√† m·ªôt ng∆∞·ªùi b√°n. `Sellers.seller_id` (PK, FK) -> `Users.user_id` (PK)." },
    { name: "Users - Admins", type: "1:1 (ho·∫∑c 1:0..1)", from: "Users", to: "Admins", details: "M·ªôt ng∆∞·ªùi d√πng c√≥ th·ªÉ l√† m·ªôt qu·∫£n tr·ªã vi√™n. `Admins.admin_id` (PK, FK) -> `Users.user_id` (PK)." },
    { name: "Users - Orders", type: "1:N", from: "Users", to: "Orders", details: "M·ªôt ng∆∞·ªùi d√πng (ng∆∞·ªùi mua) c√≥ th·ªÉ ƒë·∫∑t nhi·ªÅu ƒë∆°n h√†ng. `Orders.user_id` (FK) -> `Users.user_id` (PK)." },
    { name: "Sellers - Products", type: "1:N", from: "Sellers", to: "Products", details: "M·ªôt ng∆∞·ªùi b√°n c√≥ th·ªÉ b√°n nhi·ªÅu s·∫£n ph·∫©m. `Products.seller_id` (FK) -> `Sellers.seller_id` (PK)." },
    { name: "Categories - Products", type: "1:N", from: "Categories", to: "Products", details: "M·ªôt danh m·ª•c c√≥ th·ªÉ ch·ª©a nhi·ªÅu s·∫£n ph·∫©m. `Products.category_id` (FK) -> `Categories.category_id` (PK)." },
    { name: "Orders - Order_Items", type: "1:N", from: "Orders", to: "Order_Items", details: "M·ªôt ƒë∆°n h√†ng c√≥ th·ªÉ bao g·ªìm nhi·ªÅu m·∫∑t h√†ng. `Order_Items.order_id` (FK) -> `Orders.order_id` (PK)." },
    { name: "Products - Order_Items", type: "M:N (qua Order_Items)", from: "Products", to: "Order_Items", details: "M·ªôt s·∫£n ph·∫©m c√≥ th·ªÉ xu·∫•t hi·ªán trong nhi·ªÅu chi ti·∫øt ƒë∆°n h√†ng. `Order_Items.product_id` (FK) -> `Products.product_id` (PK)." },
    { name: "Orders - Payments", type: "1:1", from: "Orders", to: "Payments", details: "M·ªói ƒë∆°n h√†ng th∆∞·ªùng li√™n k·∫øt v·ªõi m·ªôt giao d·ªãch thanh to√°n. `Payments.order_id` (FK, UNIQUE) -> `Orders.order_id` (PK)." },
    { name: "Payment_Methods - Payments", type: "1:N", from: "Payment_Methods", to: "Payments", details: "M·ªôt ph∆∞∆°ng th·ª©c thanh to√°n c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng cho nhi·ªÅu giao d·ªãch. `Payments.method_id` (FK) -> `Payment_Methods.method_id` (PK)." },
    { name: "Orders - Shipments", type: "1:N", from: "Orders", to: "Shipments", details: "M·ªôt ƒë∆°n h√†ng c√≥ th·ªÉ c√≥ m·ªôt ho·∫∑c nhi·ªÅu l√¥ h√†ng. `Shipments.order_id` (FK) -> `Orders.order_id` (PK)." },
    { name: "Delivery_Partners - Shipments", type: "1:N", from: "Delivery_Partners", to: "Shipments", details: "M·ªôt ƒë∆°n v·ªã v·∫≠n chuy·ªÉn c√≥ th·ªÉ x·ª≠ l√Ω nhi·ªÅu l√¥ h√†ng. `Shipments.delivery_partner_id` (FK) -> `Delivery_Partners.partner_id` (PK)." },
    { name: "Products - Inventory_Lot", type: "1:N", from: "Products", to: "Inventory_Lot", details: "M·ªôt lo·∫°i s·∫£n ph·∫©m c√≥ th·ªÉ c√≥ nhi·ªÅu l√¥ h√†ng t·ªìn kho. `Inventory_Lot.product_id` (FK) -> `Products.product_id` (PK)." },
    { name: "Inventory_Lot - Product_Transformation (Source)", type: "1:N", from: "Inventory_Lot", to: "Product_Transformation", details: "M·ªôt l√¥ h√†ng t·ªìn kho c√≥ th·ªÉ l√† ngu·ªìn cho nhi·ªÅu l·∫ßn chuy·ªÉn ƒë·ªïi. `Product_Transformation.source_lot_id` (FK) -> `Inventory_Lot.lot_id` (PK)." },
    { name: "Products (Source) - Product_Transformation", type: "1:N", from: "Products", to: "Product_Transformation", details: "M·ªôt lo·∫°i s·∫£n ph·∫©m g·ªëc c√≥ th·ªÉ l√† ngu·ªìn cho nhi·ªÅu giao d·ªãch chuy·ªÉn ƒë·ªïi. `Product_Transformation.source_product_id` (FK) -> `Products.product_id` (PK)." },
    { name: "Products (Derived) - Product_Transformation", type: "1:N", from: "Products", to: "Product_Transformation", details: "M·ªôt lo·∫°i s·∫£n ph·∫©m (ƒë∆∞·ª£c t√°i ch·∫ø/chuy·ªÉn ƒë·ªïi) c√≥ th·ªÉ l√† k·∫øt qu·∫£ c·ªßa nhi·ªÅu giao d·ªãch chuy·ªÉn ƒë·ªïi. `Product_Transformation.derived_product_id` (FK) -> `Products.product_id` (PK)." },
    { name: "Users - Product_Reviews", type: "1:N", from: "Users", to: "Product_Reviews", details: "M·ªôt ng∆∞·ªùi d√πng c√≥ th·ªÉ vi·∫øt nhi·ªÅu ƒë√°nh gi√°. `Product_Reviews.user_id` (FK) -> `Users.user_id` (PK)." },
    { name: "Products - Product_Reviews", type: "1:N", from: "Products", to: "Product_Reviews", details: "M·ªôt s·∫£n ph·∫©m c√≥ th·ªÉ nh·∫≠n nhi·ªÅu ƒë√°nh gi√°. `Product_Reviews.product_id` (FK) -> `Products.product_id` (PK)." },
    { name: "Order_Items - Product_Reviews", type: "1:1", from: "Order_Items", to: "Product_Reviews", details: "M·ªói m·ª•c ƒë∆°n h√†ng ch·ªâ c√≥ th·ªÉ c√≥ m·ªôt ƒë√°nh gi√°. `Product_Reviews.order_item_id` (FK, UNIQUE) -> `Order_Items.order_item_id` (PK). ƒê·∫£m b·∫£o ƒë√°nh gi√° ch·ªâ cho s·∫£n ph·∫©m ƒë√£ mua." },
    { name: "Coupons - Orders", type: "1:N", from: "Coupons", to: "Orders (optional)", details: "M·ªôt m√£ gi·∫£m gi√° c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong nhi·ªÅu ƒë∆°n h√†ng. (C√≥ th·ªÉ th√™m `coupon_id` v√†o b·∫£ng `Orders` ho·∫∑c b·∫£ng `Order_Coupons` trung gian ƒë·ªÉ theo d√µi s·ª≠ d·ª•ng)." }
];

const principlesData = [
    {
        title: "4.1. Chu·∫©n h√≥a c∆° s·ªü d·ªØ li·ªáu (Normalization)",
        content: `
            <p class="mb-2">Chu·∫©n h√≥a l√† qu√° tr√¨nh t·ªï ch·ª©c c√°c c·ªôt v√† b·∫£ng ƒë·ªÉ gi·∫£m thi·ªÉu d∆∞ th·ª´a d·ªØ li·ªáu v√† c·∫£i thi·ªán t√≠nh to√†n v·∫πn.</p>
            <p class="mb-2"><strong>L·ª£i √≠ch:</strong> Gi·∫£m d∆∞ th·ª´a, c·∫£i thi·ªán to√†n v·∫πn, ngƒÉn ch·∫∑n b·∫•t th∆∞·ªùng d·ªØ li·ªáu, t·ªëi ∆∞u h√≥a c·∫•u tr√∫c v√† truy v·∫•n.</p>
            <p class="font-semibold mt-3 mb-1">C√°c d·∫°ng chu·∫©n h√≥a ch√≠nh:</p>
            <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>1NF (First Normal Form):</strong> M·ªói √¥ ch·ª©a m·ªôt gi√° tr·ªã ƒë∆°n, kh√¥ng nh√≥m l·∫∑p l·∫°i, m·ªói c·ªôt t√™n duy nh·∫•t.</li>
                <li><strong>2NF (Second Normal Form):</strong> ·ªû d·∫°ng 1NF, t·∫•t c·∫£ thu·ªôc t√≠nh kh√¥ng kh√≥a ph·ª• thu·ªôc ho√†n to√†n v√†o to√†n b·ªô kh√≥a ch√≠nh.</li>
                <li><strong>3NF (Third Normal Form):</strong> ·ªû d·∫°ng 2NF, kh√¥ng c√≥ s·ª± ph·ª• thu·ªôc b·∫Øc c·∫ßu.</li>
            </ul>
            <p class="mt-2"><strong>ƒê√°nh ƒë·ªïi:</strong> C√≥ th·ªÉ t·∫°o nhi·ªÅu b·∫£ng h∆°n, y√™u c·∫ßu nhi·ªÅu JOIN, ƒë√¥i khi ·∫£nh h∆∞·ªüng hi·ªáu su·∫•t. C·∫ßn c√¢n b·∫±ng.</p>
        `
    },
    {
        title: "4.2. Kh·∫£ nƒÉng m·ªü r·ªông (Scalability)",
        content: `
            <p class="mb-2">Kh·∫£ nƒÉng c·ªßa h·ªá th·ªëng ƒë·ªÉ x·ª≠ l√Ω kh·ªëi l∆∞·ª£ng c√¥ng vi·ªác tƒÉng ho·∫∑c d·ªØ li·ªáu l·ªõn h∆°n m√† v·∫´n duy tr√¨ hi·ªáu su·∫•t.</p>
            <p class="font-semibold mt-3 mb-1">Gi·∫£i ph√°p:</p>
            <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>M·ªü r·ªông theo chi·ªÅu d·ªçc (Vertical Scaling):</strong> TƒÉng CPU, RAM, l∆∞u tr·ªØ cho m·ªôt m√°y ch·ªß.</li>
                <li><strong>M·ªü r·ªông theo chi·ªÅu ngang (Horizontal Scaling / Sharding):</strong> Ph√¢n t√°n kh·ªëi l∆∞·ª£ng c√¥ng vi·ªác tr√™n nhi·ªÅu m√°y ch·ªß.</li>
                <li><strong>C·ª•m c∆° s·ªü d·ªØ li·ªáu (Database Clustering):</strong> Ph√¢n ph·ªëi d·ªØ li·ªáu, c√¢n b·∫±ng t·∫£i, tƒÉng kh·∫£ nƒÉng ch·ªãu l·ªói.</li>
                <li><strong>S·ª≠ d·ª•ng d·ªãch v·ª• ƒë√°m m√¢y (Cloud Services):</strong> Linh ho·∫°t th√™m/b·ªõt t√†i nguy√™n.</li>
            </ul>
        `
    },
    {
        title: "4.3. B·∫£o m·∫≠t d·ªØ li·ªáu (Security)",
        content: `
            <p class="mb-2">T·ªëi quan tr·ªçng do t√≠nh nh·∫°y c·∫£m c·ªßa th√¥ng tin kh√°ch h√†ng.</p>
            <p class="font-semibold mt-3 mb-1">Th·ª±c ti·ªÖn t·ªët nh·∫•t:</p>
            <ul class="list-disc list-inside ml-4 space-y-1">
                <li>Ch·ªçn n·ªÅn t·∫£ng an to√†n, tu√¢n th·ªß PCI DSS.</li>
                <li>Tri·ªÉn khai ch·ª©ng ch·ªâ SSL/TLS.</li>
                <li>K√≠ch ho·∫°t x√°c th·ª±c hai y·∫øu t·ªë (2FA).</li>
                <li>S·ª≠ d·ª•ng t∆∞·ªùng l·ª≠a, ph·∫ßn m·ªÅm ch·ªëng m√£ ƒë·ªôc.</li>
                <li>Ki·ªÉm so√°t truy c·∫≠p ch·∫∑t ch·∫Ω v√† m√£ h√≥a d·ªØ li·ªáu.</li>
            </ul>
        `
    },
    {
        title: "4.4. T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t (Performance Optimization)",
        content: `
            <p class="mb-2">Then ch·ªët cho tr·∫£i nghi·ªám ng∆∞·ªùi d√πng. Trang ch·∫≠m d·∫´n ƒë·∫øn t·ª∑ l·ªá tho√°t cao.</p>
            <p class="font-semibold mt-3 mb-1">Gi·∫£i ph√°p:</p>
            <ul class="list-disc list-inside ml-4 space-y-1">
                <li><strong>Thi·∫øt k·∫ø l∆∞·ª£c ƒë·ªì hi·ªáu qu·∫£:</strong> C√¢n nh·∫Øc chu·∫©n h√≥a v√† phi chu·∫©n h√≥a.</li>
                <li><strong>L·∫≠p ch·ªâ m·ª•c (Indexing):</strong> Gi√∫p ƒë·ªãnh v·ªã d·ªØ li·ªáu nhanh.</li>
                <li><strong>T·ªëi ∆∞u h√≥a truy v·∫•n (Query Optimization):</strong> Vi·∫øt truy v·∫•n hi·ªáu qu·∫£, tr√°nh SELECT *.</li>
                <li><strong>C∆° ch·∫ø b·ªô nh·ªõ ƒë·ªám (Caching Mechanisms):</strong> Gi·∫£m t·∫ßn su·∫•t truy c·∫≠p CSDL (v√≠ d·ª•: Redis).</li>
                <li><strong>B·∫£o tr√¨ ƒë·ªãnh k·ª≥:</strong> B·∫£o tr√¨ ch·ªâ m·ª•c, c·∫≠p nh·∫≠t th·ªëng k√™.</li>
            </ul>
        `
    }
];

const constraintsData = [
    {
        name: "PRIMARY KEY (Kh√≥a Ch√≠nh)",
        description: "M·ªôt c·ªôt ho·∫∑c m·ªôt t·∫≠p h·ª£p c√°c c·ªôt x√°c ƒë·ªãnh duy nh·∫•t m·ªói h√†ng trong m·ªôt b·∫£ng. Kh√≥a ch√≠nh kh√¥ng ƒë∆∞·ª£c ch·ª©a gi√° tr·ªã NULL v√† ph·∫£i l√† duy nh·∫•t.",
        howItWorks: "Khi m·ªôt c·ªôt ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a l√† kh√≥a ch√≠nh, DBMS t·ª± ƒë·ªông t·∫°o m·ªôt ch·ªâ m·ª•c duy nh·∫•t tr√™n c·ªôt ƒë√≥ ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô truy v·∫•n v√† ƒë·∫£m b·∫£o t√≠nh duy nh·∫•t. M·ªói b·∫£ng ch·ªâ c√≥ th·ªÉ c√≥ m·ªôt kh√≥a ch√≠nh.",
        examples: [
            "`Users.user_id` PK: M·ªói ng∆∞·ªùi d√πng c√≥ m·ªôt m√£ ƒë·ªãnh danh duy nh·∫•t.",
            "`Products.product_id` PK: M·ªói s·∫£n ph·∫©m c√≥ m·ªôt m√£ ƒë·ªãnh danh duy nh·∫•t.",
            "`Orders.order_id` PK: M·ªói ƒë∆°n h√†ng c√≥ m·ªôt m√£ ƒë·ªãnh danh duy nh·∫•t."
        ]
    },
    {
        name: "FOREIGN KEY (Kh√≥a Ngo·∫°i)",
        description: "M·ªôt c·ªôt ho·∫∑c t·∫≠p h·ª£p c√°c c·ªôt trong m·ªôt b·∫£ng (b·∫£ng con) tham chi·∫øu ƒë·∫øn kh√≥a ch√≠nh c·ªßa m·ªôt b·∫£ng kh√°c (b·∫£ng cha). Kh√≥a ngo·∫°i thi·∫øt l·∫≠p m·ªëi li√™n k·∫øt gi·ªØa hai b·∫£ng v√† ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn tham chi·∫øu.",
        howItWorks: "ƒê·∫£m b·∫£o r·∫±ng m·ªçi gi√° tr·ªã ƒë∆∞·ª£c ch√®n ho·∫∑c c·∫≠p nh·∫≠t v√†o c·ªôt kh√≥a ngo·∫°i ph·∫£i t·ªìn t·∫°i trong c·ªôt kh√≥a ch√≠nh c·ªßa b·∫£ng cha. Khi x√≥a/c·∫≠p nh·∫≠t b·∫£ng cha, DBMS s·∫Ω ki·ªÉm tra c√°c h√†ng li√™n quan trong b·∫£ng con v√† √°p d·ª•ng quy t·∫Øc h√†nh ƒë·ªông (v√≠ d·ª•: RESTRICT, CASCADE, SET NULL, SET DEFAULT).",
        examples: [
            "`Orders.user_id` FK REFERENCES `Users(user_id)`: M·ªói ƒë∆°n h√†ng ph·∫£i thu·ªôc v·ªÅ m·ªôt ng∆∞·ªùi d√πng ƒë√£ t·ªìn t·∫°i.",
            "`Products.category_id` FK REFERENCES `Categories(category_id)`: M·ªói s·∫£n ph·∫©m ph·∫£i thu·ªôc v·ªÅ m·ªôt danh m·ª•c ƒë√£ t·ªìn t·∫°i.",
            "`Order_Items.product_id` FK REFERENCES `Products(product_id)`: M·ªói m·ª•c trong ƒë∆°n h√†ng ph·∫£i l√† m·ªôt s·∫£n ph·∫©m ƒë√£ t·ªìn t·∫°i."
        ]
    },
    {
        name: "NOT NULL",
        description: "R√†ng bu·ªôc n√†y ƒë·∫£m b·∫£o r·∫±ng m·ªôt c·ªôt kh√¥ng th·ªÉ ch·ª©a gi√° tr·ªã NULL (r·ªóng). ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† m·ªói h√†ng ph·∫£i c√≥ m·ªôt gi√° tr·ªã c·ª• th·ªÉ cho c·ªôt ƒë√≥.",
        howItWorks: "N·∫øu b·∫°n c·ªë g·∫Øng ch√®n m·ªôt h√†ng m·ªõi ho·∫∑c c·∫≠p nh·∫≠t m·ªôt h√†ng hi·ªán c√≥ m√† ƒë·ªÉ tr·ªëng (NULL) m·ªôt c·ªôt c√≥ r√†ng bu·ªôc NOT NULL, thao t√°c s·∫Ω b·ªã t·ª´ ch·ªëi.",
        examples: [
            "`Users.email` NOT NULL: M·ªói ng∆∞·ªùi d√πng ph·∫£i c√≥ ƒë·ªãa ch·ªâ email.",
            "`Products.name` NOT NULL: M·ªói s·∫£n ph·∫©m ph·∫£i c√≥ t√™n.",
            "`Orders.order_date` NOT NULL: M·ªói ƒë∆°n h√†ng ph·∫£i c√≥ ng√†y ƒë·∫∑t h√†ng."
        ]
    },
    {
        name: "UNIQUE",
        description: "R√†ng bu·ªôc n√†y ƒë·∫£m b·∫£o r·∫±ng t·∫•t c·∫£ c√°c gi√° tr·ªã trong m·ªôt c·ªôt (ho·∫∑c t·∫≠p h·ª£p c√°c c·ªôt) ph·∫£i l√† duy nh·∫•t. M·ªôt b·∫£ng c√≥ th·ªÉ c√≥ nhi·ªÅu r√†ng bu·ªôc UNIQUE v√† c·ªôt UNIQUE c√≥ th·ªÉ ch·ª©a gi√° tr·ªã NULL (th∆∞·ªùng ch·ªâ m·ªôt gi√° tr·ªã NULL duy nh·∫•t ƒë∆∞·ª£c ph√©p, t√πy DBMS).",
        howItWorks: "N·∫øu b·∫°n c·ªë g·∫Øng ch√®n m·ªôt gi√° tr·ªã ƒë√£ t·ªìn t·∫°i v√†o m·ªôt c·ªôt c√≥ r√†ng bu·ªôc UNIQUE, thao t√°c s·∫Ω b·ªã t·ª´ ch·ªëi. Kh√°c v·ªõi PRIMARY KEY, UNIQUE kh√¥ng nh·∫•t thi·∫øt ph·∫£i l√† kh√≥a ch√≠nh v√† c√≥ th·ªÉ cho ph√©p NULL.",
        examples: [
            "`Users.username` UNIQUE: T√™n ƒëƒÉng nh·∫≠p c·ªßa m·ªói ng∆∞·ªùi d√πng ph·∫£i l√† duy nh·∫•t.",
            "`Categories.name` UNIQUE: T√™n m·ªói danh m·ª•c s·∫£n ph·∫©m ph·∫£i l√† duy nh·∫•t.",
            "`Products.sku` UNIQUE: M√£ SKU c·ªßa m·ªói s·∫£n ph·∫©m (n·∫øu c√≥) ph·∫£i l√† duy nh·∫•t."
        ]
    },
    {
        name: "CHECK",
        description: "R√†ng bu·ªôc CHECK ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·ªãnh nghƒ©a m·ªôt ƒëi·ªÅu ki·ªán logic m√† d·ªØ li·ªáu trong m·ªôt c·ªôt (ho·∫∑c nhi·ªÅu c·ªôt) ph·∫£i th·ªèa m√£n. ƒêi·ªÅu ki·ªán n√†y ƒë∆∞·ª£c ƒë√°nh gi√° m·ªói khi d·ªØ li·ªáu ƒë∆∞·ª£c ch√®n ho·∫∑c c·∫≠p nh·∫≠t.",
        howItWorks: "M·ªói khi m·ªôt h√†ng ƒë∆∞·ª£c ch√®n ho·∫∑c c·∫≠p nh·∫≠t, ƒëi·ªÅu ki·ªán trong CHECK s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông ki·ªÉm tra. N·∫øu ƒëi·ªÅu ki·ªán tr·∫£ v·ªÅ FALSE, thao t√°c s·∫Ω b·ªã t·ª´ ch·ªëi.",
        examples: [
            "`Products.price` CHECK (`price` > 0): ƒê·∫£m b·∫£o gi√° s·∫£n ph·∫©m lu√¥n l√† m·ªôt s·ªë d∆∞∆°ng.",
            "`Order_Items.quantity` CHECK (`quantity` > 0): ƒê·∫£m b·∫£o s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong ƒë∆°n h√†ng lu√¥n l·ªõn h∆°n 0.",
            "`Users.role` CHECK (`role` IN ('buyer', 'seller', 'admin')): ƒê·∫£m b·∫£o vai tr√≤ ng∆∞·ªùi d√πng ch·ªâ thu·ªôc m·ªôt trong c√°c gi√° tr·ªã h·ª£p l·ªá."
        ]
    },
    {
        name: "DEFAULT",
        description: "R√†ng bu·ªôc DEFAULT ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ cung c·∫•p m·ªôt gi√° tr·ªã m·∫∑c ƒë·ªãnh cho m·ªôt c·ªôt n·∫øu kh√¥ng c√≥ gi√° tr·ªã n√†o ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh khi ch√®n m·ªôt h√†ng m·ªõi.",
        howItWorks: "N·∫øu m·ªôt c·ªôt c√≥ r√†ng bu·ªôc DEFAULT b·ªã b·ªè qua trong c√¢u l·ªánh INSERT, c∆° s·ªü d·ªØ li·ªáu s·∫Ω t·ª± ƒë·ªông s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh ƒë√£ ƒë·ªãnh nghƒ©a cho c·ªôt ƒë√≥.",
        examples: [
            "`Orders.status` DEFAULT 'pending': N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh, tr·∫°ng th√°i ƒë∆°n h√†ng m·∫∑c ƒë·ªãnh l√† 'pending'.",
            "`Users.registration_date` DEFAULT CURRENT_TIMESTAMP: Ng√†y ƒëƒÉng k√Ω m·∫∑c ƒë·ªãnh l√† th·ªùi ƒëi·ªÉm hi·ªán t·∫°i.",
            "`Products.stock_quantity` DEFAULT 0: S·ªë l∆∞·ª£ng t·ªìn kho m·∫∑c ƒë·ªãnh l√† 0 n·∫øu kh√¥ng ƒë∆∞·ª£c cung c·∫•p."
        ]
    }
];

const expirationRepurposingData = {
    problem: {
        title: "B√†i to√°n: Qu·∫£n l√Ω H·∫°n s·ª≠ d·ª•ng v√† T√°i ch·∫ø s·∫£n ph·∫©m",
        description: "Trong m·ªôt s·ªë ng√†nh h√†ng (v√≠ d·ª•: th·ª±c ph·∫©m, d∆∞·ª£c ph·∫©m), s·∫£n ph·∫©m c√≥ h·∫°n s·ª≠ d·ª•ng nh·∫•t ƒë·ªãnh. Khi s·∫£n ph·∫©m g·∫ßn h·∫øt h·∫°n, c√≥ th·ªÉ c·∫ßn chuy·ªÉn ƒë·ªïi ch√∫ng th√†nh s·∫£n ph·∫©m kh√°c (v√≠ d·ª•: c√† r·ªët t∆∞∆°i th√†nh n∆∞·ªõc √©p c√† r·ªët) ƒë·ªÉ tr√°nh l√£ng ph√≠ v√† t·∫°o ra gi√° tr·ªã m·ªõi."
    },
    expirationSolution: {
        title: "Gi·∫£i ph√°p cho H·∫°n s·ª≠ d·ª•ng: B·∫£ng `Inventory_Lot`",
        description: "ƒê·ªÉ qu·∫£n l√Ω h·∫°n s·ª≠ d·ª•ng m·ªôt c√°ch ch√≠nh x√°c, ƒë·∫∑c bi·ªát khi c√πng m·ªôt s·∫£n ph·∫©m c√≥ th·ªÉ c√≥ nhi·ªÅu l√¥ h√†ng v·ªõi c√°c h·∫°n s·ª≠ d·ª•ng kh√°c nhau, vi·ªác t·∫°o m·ªôt b·∫£ng ri√™ng l√† c·∫ßn thi·∫øt.",
        table: {
            name: "Inventory_Lot (L√¥ H√†ng T·ªìn Kho)",
            attributes: [
                { name: "lot_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói l√¥ h√†ng t·ªìn kho." },
                { name: "product_id", type: "FK (Products.product_id), NOT NULL", details: "Li√™n k·∫øt v·ªõi s·∫£n ph·∫©m m√† l√¥ h√†ng n√†y thu·ªôc v·ªÅ." },
                { name: "seller_id", type: "FK (Sellers.seller_id), NOT NULL", details: "Ng∆∞·ªùi b√°n s·ªü h·ªØu l√¥ h√†ng n√†y." },
                { name: "quantity_in_lot", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong l√¥ n√†y. CHECK (`quantity_in_lot` >= 0)" },
                { name: "received_date", type: "DATE", details: "Ng√†y nh·∫≠n l√¥ h√†ng v√†o kho." },
                { name: "manufacturing_date", type: "DATE", details: "Ng√†y s·∫£n xu·∫•t c·ªßa l√¥ h√†ng (n·∫øu c√≥)." },
                { name: "expiration_date", type: "DATE, NOT NULL", details: "Ng√†y h·∫øt h·∫°n c·ªßa l√¥ s·∫£n ph·∫©m." },
                { name: "status", type: "VARCHAR(50), DEFAULT 'available'", details: "Tr·∫°ng th√°i c·ªßa l√¥ h√†ng. CHECK (`status` IN ('available', 'nearing_expiry', 'expired', 'repurposed', 'sold_out'))" },
                { name: "cost_price_per_unit", type: "DECIMAL(10,2)", details: "Gi√° v·ªën m·ªói ƒë∆°n v·ªã c·ªßa l√¥ h√†ng n√†y (ƒë·ªÉ t√≠nh to√°n l·ª£i nhu·∫≠n)." },
                { name: "location_in_warehouse", type: "VARCHAR(100)", details: "V·ªã tr√≠ l∆∞u tr·ªØ c·ª• th·ªÉ trong kho." }
            ]
        },
        explanation: "Vi·ªác t√°ch `expiration_date` ra kh·ªèi b·∫£ng `Products` v√† ƒë∆∞a v√†o `Inventory_Lot` gi√∫p qu·∫£n l√Ω chi ti·∫øt t·ª´ng l√¥ s·∫£n ph·∫©m. M·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: s·ªØa) c√≥ th·ªÉ c√≥ nhi·ªÅu l√¥ kh√°c nhau, m·ªói l√¥ c√≥ ng√†y s·∫£n xu·∫•t v√† h·∫°n s·ª≠ d·ª•ng ri√™ng. ƒêi·ªÅu n√†y cho ph√©p h·ªá th·ªëng theo d√µi ch√≠nh x√°c t·ªìn kho theo h·∫°n s·ª≠ d·ª•ng, c·∫£nh b√°o khi s·∫£n ph·∫©m g·∫ßn h·∫øt h·∫°n, v√† h·ªó tr·ª£ c√°c ph∆∞∆°ng ph√°p qu·∫£n l√Ω t·ªìn kho nh∆∞ FIFO (First-In, First-Out)."
    },
    repurposingSolution: {
        title: "Gi·∫£i ph√°p cho T√°i ch·∫ø/Chuy·ªÉn ƒë·ªïi s·∫£n ph·∫©m: B·∫£ng `Product_Transformation`",
        description: "ƒê·ªÉ theo d√µi qu√° tr√¨nh chuy·ªÉn ƒë·ªïi s·∫£n ph·∫©m (th∆∞·ªùng l√† g·∫ßn h·∫øt h·∫°n) th√†nh s·∫£n ph·∫©m m·ªõi, m·ªôt b·∫£ng ri√™ng s·∫Ω ghi l·∫°i c√°c giao d·ªãch n√†y.",
        table: {
            name: "Product_Transformation (Chuy·ªÉn ƒê·ªïi S·∫£n Ph·∫©m)",
            attributes: [
                { name: "transformation_id", type: "PK", details: "M√£ ƒë·ªãnh danh duy nh·∫•t cho m·ªói giao d·ªãch chuy·ªÉn ƒë·ªïi." },
                { name: "source_lot_id", type: "FK (Inventory_Lot.lot_id), NOT NULL", details: "L√¥ h√†ng g·ªëc ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ chuy·ªÉn ƒë·ªïi." },
                { name: "source_product_id", type: "FK (Products.product_id), NOT NULL", details: "S·∫£n ph·∫©m g·ªëc ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi (ƒë·ªÉ d·ªÖ truy v·∫•n)." },
                { name: "quantity_transformed", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m g·ªëc ƒë√£ s·ª≠ d·ª•ng trong qu√° tr√¨nh chuy·ªÉn ƒë·ªïi. CHECK (`quantity_transformed` > 0)" },
                { name: "derived_product_id", type: "FK (Products.product_id), NOT NULL", details: "S·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c t·∫°o ra sau chuy·ªÉn ƒë·ªïi (c≈©ng l√† m·ªôt Product trong b·∫£ng Products)." },
                { name: "derived_quantity_produced", type: "INTEGER, NOT NULL", details: "S·ªë l∆∞·ª£ng s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c t·∫°o ra. CHECK (`derived_quantity_produced` > 0)" },
                { name: "transformation_date", type: "TIMESTAMP, NOT NULL, DEFAULT CURRENT_TIMESTAMP", details: "Ng√†y v√† gi·ªù th·ª±c hi·ªán chuy·ªÉn ƒë·ªïi." },
                { name: "reason", type: "TEXT", details: "L√Ω do chuy·ªÉn ƒë·ªïi (v√≠ d·ª•: 'nearing_expiry', 'damaged_packaging_repurposed')." },
                { name: "transformed_by_user_id", type: "FK (Users.user_id)", details: "Ng∆∞·ªùi d√πng (admin/seller) th·ª±c hi·ªán chuy·ªÉn ƒë·ªïi." },
                { name: "notes", type: "TEXT", details: "Ghi ch√∫ th√™m v·ªÅ qu√° tr√¨nh chuy·ªÉn ƒë·ªïi." }
            ]
        },
        explanation: "Khi m·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: c√† r·ªët t·ª´ m·ªôt l√¥ g·∫ßn h·∫øt h·∫°n) ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh s·∫£n ph·∫©m kh√°c (n∆∞·ªõc √©p), h·ªá th·ªëng s·∫Ω ghi nh·∫≠n giao d·ªãch n√†y v√†o b·∫£ng `Product_Transformation`. ƒê·ªìng th·ªùi, s·ªë l∆∞·ª£ng c·ªßa `source_lot_id` trong `Inventory_Lot` t∆∞∆°ng ·ª©ng s·∫Ω gi·∫£m (ho·∫∑c tr·∫°ng th√°i l√¥ thay ƒë·ªïi), v√† s·ªë l∆∞·ª£ng c·ªßa `derived_product_id` s·∫Ω tƒÉng (c√≥ th·ªÉ t·∫°o m·ªôt l√¥ m·ªõi trong `Inventory_Lot` cho s·∫£n ph·∫©m m·ªõi n√†y v·ªõi HSD m·ªõi n·∫øu c√≥). ƒêi·ªÅu n√†y gi√∫p duy tr√¨ t√≠nh to√†n v·∫πn t·ªìn kho v√† theo d√µi chu·ªói gi√° tr·ªã c·ªßa s·∫£n ph·∫©m. Quan tr·ªçng l√†, `derived_product_id` l√† m·ªôt `product_id` trong ch√≠nh b·∫£ng `Products`, cho ph√©p m·ªôt s·∫£n ph·∫©m g·ªëc c√≥ th·ªÉ t·∫°o ra nhi·ªÅu lo·∫°i s·∫£n ph·∫©m t√°i ch·∫ø kh√°c nhau (v√≠ d·ª•: c√† r·ªët c√≥ th·ªÉ th√†nh n∆∞·ªõc √©p ho·∫∑c th√†nh nguy√™n li·ªáu s√∫p)."
    },
    needForNewTables: {
        title: "C√≥ c·∫ßn thi·∫øt ƒë·ªÉ t·∫°o b·∫£ng m·ªõi hay kh√¥ng?",
        explanation: "<strong>C√≥, vi·ªác t·∫°o c√°c b·∫£ng m·ªõi nh∆∞ `Inventory_Lot` v√† `Product_Transformation` l√† r·∫•t c·∫ßn thi·∫øt.</strong><br/>- N·∫øu ch·ªâ th√™m thu·ªôc t√≠nh `expiration_date` tr·ª±c ti·∫øp v√†o b·∫£ng `Products` hi·ªán c√≥, s·∫Ω d·∫´n ƒë·∫øn <strong>vi ph·∫°m chu·∫©n h√≥a d·ªØ li·ªáu</strong> (c·ª• th·ªÉ l√† 1NF v√† 2NF n·∫øu m·ªôt s·∫£n ph·∫©m c√≥ nhi·ªÅu l√¥ v·ªõi HSD kh√°c nhau) v√† g√¢y ra s·ª± d∆∞ th·ª´a, kh√¥ng nh·∫•t qu√°n d·ªØ li·ªáu.<br/>- Vi·ªác qu·∫£n l√Ω t·ªìn kho theo l√¥ (batch/lot tracking) l√† kh√¥ng th·ªÉ n·∫øu ch·ªâ c√≥ m·ªôt c·ªôt `stock_quantity` v√† `expiration_date` trong b·∫£ng `Products`. `Inventory_Lot` cho ph√©p theo d√µi ch√≠nh x√°c t·ª´ng l√¥ h√†ng, h·ªó tr·ª£ c√°c chi·∫øn l∆∞·ª£c qu·∫£n l√Ω kho nh∆∞ FIFO/FEFO.<br/>- ƒê·ªëi v·ªõi vi·ªác t√°i ch·∫ø, b·∫£ng `Product_Transformation` ghi l·∫°i m·ªôt <strong>s·ª± ki·ªán</strong> chuy·ªÉn ƒë·ªïi. N·∫øu ch·ªâ th√™m thu·ªôc t√≠nh v√†o `Products`, b·∫°n s·∫Ω kh√¥ng th·ªÉ theo d√µi l·ªãch s·ª≠ chuy·ªÉn ƒë·ªïi ho·∫∑c m·ªëi quan h·ªá ph·ª©c t·∫°p gi·ªØa s·∫£n ph·∫©m g·ªëc v√† s·∫£n ph·∫©m ph√°i sinh.<br/>C√°c b·∫£ng ri√™ng bi·ªát gi√∫p qu·∫£n l√Ω th√¥ng tin m·ªôt c√°ch r√µ r√†ng, ch√≠nh x√°c, tu√¢n th·ªß c√°c d·∫°ng chu·∫©n h√≥a, v√† c√≥ kh·∫£ nƒÉng m·ªü r·ªông h∆°n cho c√°c nghi·ªáp v·ª• ph·ª©c t·∫°p nh∆∞ qu·∫£n l√Ω l√¥ h√†ng, t·ªìn kho theo h·∫°n s·ª≠ d·ª•ng, truy xu·∫•t ngu·ªìn g·ªëc v√† chu·ªói cung ·ª©ng."
    }
};


document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    const entityList = document.getElementById('entityList');
    const entityDetail = document.getElementById('entityDetail');
    const relationshipList = document.getElementById('relationshipList');
    const relationshipDetail = document.getElementById('relationshipDetail');
    const principlesAccordion = document.getElementById('principlesAccordion'); // This element is now removed, but the variable remains
    const constraintsList = document.getElementById('constraintsList');
    const mobileMenuButton = document.getElementById('mobileMenuButton');
    const mainNav = document.getElementById('mainNav');

    mobileMenuButton.addEventListener('click', () => {
        mainNav.classList.toggle('hidden');
        mainNav.classList.toggle('md:flex');
    });
    
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active', 'text-sky-600', 'border-sky-600'));
            tabs.forEach(t => t.classList.add('text-stone-100'));
            tab.classList.add('active', 'text-sky-600', 'border-sky-600');
            tab.classList.remove('text-stone-100');

            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById(tab.dataset.tab).classList.add('active');

            if (window.innerWidth < 768 && !mainNav.classList.contains('hidden')) {
                 mainNav.classList.add('hidden');
            }
        });
    });
    // Set initial active tab style for the new default tab (entities)
    const initialActiveTab = document.querySelector('.tab-button[data-tab="entities"]');
    if (initialActiveTab) {
        initialActiveTab.classList.add('active', 'text-sky-600', 'border-sky-600');
        initialActiveTab.classList.remove('text-stone-100');
        document.getElementById('entities').classList.add('active'); // Ensure content is active
    }


    function populateEntityList() {
        entityList.innerHTML = '';
        Object.keys(entitiesData).forEach(key => {
            const listItem = document.createElement('li');
            listItem.textContent = entitiesData[key].name;
            listItem.className = 'entity-list-item p-2 hover:bg-emerald-50 cursor-pointer rounded transition-colors duration-150';
            listItem.dataset.entityKey = key;
            listItem.addEventListener('click', () => {
                document.querySelectorAll('.entity-list-item').forEach(item => item.classList.remove('active'));
                listItem.classList.add('active');
                displayEntityDetails(key);
            });
            entityList.appendChild(listItem);
        });
    }

    function displayEntityDetails(key) {
        const entity = entitiesData[key];
        if (!entity) {
            entityDetail.innerHTML = '<p class="text-stone-500 italic">Kh√¥ng t√¨m th·∫•y th√¥ng tin th·ª±c th·ªÉ.</p>';
            return;
        }
        let attributesHtml = entity.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');

        entityDetail.innerHTML = `
            <h3 class="text-xl font-semibold text-emerald-700 mb-2">${entity.name}</h3>
            <p class="text-sm text-stone-600 mb-4">${entity.description}</p>
            <h4 class="text-md font-semibold text-emerald-600 mt-4 mb-2">Thu·ªôc t√≠nh:</h4>
            <div class="overflow-x-auto shadow rounded-md">
                <table class="min-w-full bg-white border border-stone-200">
                    <thead class="bg-stone-100">
                        <tr>
                            <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">T√™n Thu·ªôc T√≠nh</th>
                            <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">Lo·∫°i (PK/FK/R√†ng bu·ªôc)</th>
                            <th class="py-2 px-3 border-b border-stone-200 text-left text-xs font-semibold text-stone-600 uppercase tracking-wider">M√¥ T·∫£</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-stone-200">
                        ${attributesHtml}
                    </tbody>
                </table>
            </div>
        `;
    }

    function populateRelationshipList() {
        relationshipList.innerHTML = '';
        relationshipsData.forEach((rel, index) => {
            const listItem = document.createElement('li');
            listItem.textContent = rel.name;
            listItem.className = 'relationship-list-item p-2 hover:bg-sky-50 cursor-pointer rounded transition-colors duration-150';
            listItem.dataset.relIndex = index;
            listItem.addEventListener('click', () => {
                document.querySelectorAll('.relationship-list-item').forEach(item => item.classList.remove('active'));
                listItem.classList.add('active');
                displayRelationshipDetails(index);
            });
            relationshipList.appendChild(listItem);
        });
    }

    function displayRelationshipDetails(index) {
        const rel = relationshipsData[index];
        if (!rel) {
            relationshipDetail.innerHTML = '<p class="text-stone-500 italic">Kh√¥ng t√¨m th·∫•y th√¥ng tin m·ªëi quan h·ªá.</p>';
            return;
        }
        relationshipDetail.innerHTML = `
            <h3 class="text-xl font-semibold text-sky-700 mb-2">${rel.name}</h3>
            <p class="text-sm text-stone-600 mb-1"><strong class="text-stone-700">Lo·∫°i:</strong> ${rel.type}</p>
            <p class="text-sm text-stone-600 mb-1"><strong class="text-stone-700">T·ª´ Th·ª±c th·ªÉ:</strong> ${rel.from}</p>
            <p class="text-sm text-stone-600 mb-3"><strong class="text-stone-700">T·ªõi Th·ª±c th·ªÉ:</strong> ${rel.to}</p>
            <p class="text-sm text-stone-600 leading-relaxed">${rel.details}</p>
        `;
    }
    
    // Removed populatePrinciples() function as the tab is removed.

    function populateConstraints() {
        constraintsList.innerHTML = '';
        constraintsData.forEach(constraint => {
            const constraintDiv = document.createElement('div');
            constraintDiv.className = 'p-5 border border-blue-200 rounded-lg bg-blue-50 shadow';
            let examplesHtml = constraint.examples.map(ex => `<li class="text-sm text-stone-700 bg-white p-2 rounded border border-blue-100 shadow-sm">${ex}</li>`).join('');
            constraintDiv.innerHTML = `
                <h3 class="text-xl font-semibold text-blue-700 mb-2">${constraint.name}</h3>
                <p class="text-sm text-stone-700 mb-3 leading-relaxed">${constraint.description}</p>
                <h4 class="text-md font-semibold text-blue-600 mb-2">C√°ch ho·∫°t ƒë·ªông:</h4>
                <p class="text-sm text-stone-700 mb-4 leading-relaxed">${constraint.howItWorks}</p>
                <h4 class="text-md font-semibold text-blue-600 mb-2">V√≠ d·ª•:</h4>
                <ul class="list-none space-y-2">
                    ${examplesHtml}
                </ul>
            `;
            constraintsList.appendChild(constraintDiv);
        });
    }

    function populateExpirationRepurposing() {
        const data = expirationRepurposingData;
        document.getElementById('problem-title').textContent = data.problem.title;
        document.getElementById('problem-description').textContent = data.problem.description;

        document.getElementById('expiration-solution-title').textContent = data.expirationSolution.title;
        document.getElementById('expiration-solution-description').textContent = data.expirationSolution.description;
        document.getElementById('inventory-lot-table-name').textContent = data.expirationSolution.table.name;
        const inventoryLotAttributesBody = document.getElementById('inventory-lot-attributes');
        inventoryLotAttributesBody.innerHTML = data.expirationSolution.table.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');
        document.getElementById('expiration-solution-explanation').innerHTML = data.expirationSolution.explanation;

        document.getElementById('repurposing-solution-title').textContent = data.repurposingSolution.title;
        document.getElementById('repurposing-solution-description').textContent = data.repurposingSolution.description;
        document.getElementById('product-transformation-table-name').textContent = data.repurposingSolution.table.name;
        const productTransformationAttributesBody = document.getElementById('product-transformation-attributes');
        productTransformationAttributesBody.innerHTML = data.repurposingSolution.table.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');
        document.getElementById('repurposing-solution-explanation').innerHTML = data.repurposingSolution.explanation;
        
        document.getElementById('need-for-new-tables-title').textContent = data.needForNewTables.title;
        document.getElementById('need-for-new-tables-explanation').innerHTML = data.needForNewTables.explanation;
    }

    function populateProductReviews() {
        const attributesBody = document.getElementById('product-reviews-attributes');
        attributesBody.innerHTML = entitiesData.Product_Reviews.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');
    }

    function populatePromotionsCoupons() {
        const salesAttributesBody = document.getElementById('sales-attributes');
        salesAttributesBody.innerHTML = entitiesData.Sales.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');

        const couponsAttributesBody = document.getElementById('coupons-attributes');
        couponsAttributesBody.innerHTML = entitiesData.Coupons.attributes.map(attr => `
            <tr class="hover:bg-stone-50">
                <td class="py-2 px-3 border-b border-stone-200 font-medium text-stone-700">${attr.name}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-sky-600">${attr.type}</td>
                <td class="py-2 px-3 border-b border-stone-200 text-sm text-stone-600">${attr.details}</td>
            </tr>
        `).join('');
    }


    populateEntityList();
    populateRelationshipList();
    // populatePrinciples(); // Removed call to this function
    populateConstraints();
    populateExpirationRepurposing();
    populateProductReviews();
    populatePromotionsCoupons();
});
</script>
</body>
</html>
